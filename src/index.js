function getFlagEmoji(locale) {
  // Single flagMap that includes known country codes and their flags
  const flagMap = {
    'AC': '1f1e6-1f1e8',
    'AD': '1f1e6-1f1e9',
    'AE': '1f1e6-1f1ea',
    'AF': '1f1e6-1f1eb',
    'AG': '1f1e6-1f1ec',
    'AI': '1f1e6-1f1ee',
    'AL': '1f1e6-1f1f1',
    'AM': '1f1e6-1f1f2',
    'AO': '1f1e6-1f1f4',
    'AQ': '1f1e6-1f1f6',
    'AR': '1f1e6-1f1f7',
    'AS': '1f1e6-1f1f8',
    'AT': '1f1e6-1f1f9',
    'AU': '1f1e6-1f1fa',
    'AW': '1f1e6-1f1fc',
    'AX': '1f1e6-1f1fd',
    'AZ': '1f1e6-1f1ff',
    'BA': '1f1e7-1f1e6',
    'BB': '1f1e7-1f1e7',
    'BD': '1f1e7-1f1e9',
    'BE': '1f1e7-1f1ea',
    'BF': '1f1e7-1f1eb',
    'BG': '1f1e7-1f1ec',
    'BH': '1f1e7-1f1ed',
    'BI': '1f1e7-1f1ee',
    'BJ': '1f1e7-1f1ef',
    'BL': '1f1e7-1f1f1',
    'BM': '1f1e7-1f1f2',
    'BN': '1f1e7-1f1f3',
    'BO': '1f1e7-1f1f4',
    'BQ': '1f1e7-1f1f6',
    'BR': '1f1e7-1f1f7',
    'BS': '1f1e7-1f1f8',
    'BT': '1f1e7-1f1f9',
    'BV': '1f1e7-1f1fb',
    'BW': '1f1e7-1f1fc',
    'BY': '1f1e7-1f1fe',
    'BZ': '1f1e7-1f1ff',
    'CA': '1f1e8-1f1e6',
    'CC': '1f1e8-1f1e8',
    'CD': '1f1e8-1f1e9',
    'CF': '1f1e8-1f1eb',
    'CG': '1f1e8-1f1ec',
    'CH': '1f1e8-1f1ed',
    'CI': '1f1e8-1f1ee',
    'CK': '1f1e8-1f1f0',
    'CL': '1f1e8-1f1f1',
    'CM': '1f1e8-1f1f2',
    'CN': '1f1e8-1f1f3',
    'CO': '1f1e8-1f1f4',
    'CP': '1f1e8-1f1f5',
    'CR': '1f1e8-1f1f7',
    'CU': '1f1e8-1f1fa',
    'CV': '1f1e8-1f1fb',
    'CW': '1f1e8-1f1fc',
    'CX': '1f1e8-1f1fd',
    'CY': '1f1e8-1f1fe',
    'CZ': '1f1e8-1f1ff',
    'DE': '1f1e9-1f1ea',
    'DG': '1f1e9-1f1ec',
    'DJ': '1f1e9-1f1ef',
    'DK': '1f1e9-1f1f0',
    'DM': '1f1e9-1f1f2',
    'DO': '1f1e9-1f1f4',
    'DZ': '1f1e9-1f1ff',
    'EA': '1f1ea-1f1e6',
    'EC': '1f1ea-1f1e8',
    'EE': '1f1ea-1f1ea',
    'EG': '1f1ea-1f1ec',
    'EH': '1f1ea-1f1ed',
    'ER': '1f1ea-1f1f7',
    'ES': '1f1ea-1f1f8',
    'ET': '1f1ea-1f1f9',
    'EU': '1f1ea-1f1fa',
    'FI': '1f1eb-1f1ee',
    'FK': '1f1eb-1f1ef',
    'FM': '1f1eb-1f1f2',
    'FO': '1f1eb-1f1f4',
    'FR': '1f1eb-1f1f7',
    'GA': '1f1ec-1f1e6',
    'GB': '1f1ec-1f1e7',
    'GD': '1f1ec-1f1e9',
    'GE': '1f1ec-1f1ea',
    'GF': '1f1ec-1f1eb',
    'GG': '1f1ec-1f1ec',
    'GH': '1f1ec-1f1ed',
    'GI': '1f1ec-1f1ee',
    'GL': '1f1ec-1f1f1',
    'GM': '1f1ec-1f1f2',
    'GN': '1f1ec-1f1f3',
    'GP': '1f1ec-1f1f5',
    'GQ': '1f1ec-1f1f6',
    'GR': '1f1ec-1f1f7',
    'GS': '1f1ec-1f1f8',
    'GT': '1f1ec-1f1f9',
    'GU': '1f1ec-1f1fa',
    'GW': '1f1ec-1f1fc',
    'GY': '1f1ec-1f1fe',
    'HK': '1f1ed-1f1f0',
    'HM': '1f1ed-1f1f2',
    'HN': '1f1ed-1f1f3',
    'HR': '1f1ed-1f1f7',
    'HT': '1f1ed-1f1f9',
    'HU': '1f1ed-1f1fa',
    'IC': '1f1ee-1f1e8',
    'ID': '1f1ee-1f1e9',
    'IE': '1f1ee-1f1ea',
    'IL': '1f1ee-1f1f1',
    'IM': '1f1ee-1f1f2',
    'IN': '1f1ee-1f1f3',
    'IO': '1f1ee-1f1f4',
    'IQ': '1f1ee-1f1f6',
    'IR': '1f1ee-1f1f7',
    'IS': '1f1ee-1f1f8',
    'IT': '1f1ee-1f1f9',
    'JE': '1f1ef-1f1ea',
    'JM': '1f1ef-1f1f2',
    'JO': '1f1ef-1f1f4',
    'JP': '1f1ef-1f1f5',
    'KE': '1f1f0-1f1ea',
    'KG': '1f1f0-1f1ec',
    'KH': '1f1f0-1f1ed',
    'KI': '1f1f0-1f1ee',
    'KM': '1f1f0-1f1f2',
    'KN': '1f1f0-1f1f3',
    'KP': '1f1f0-1f1f5',
    'KR': '1f1f0-1f1f7',
    'KW': '1f1f0-1f1fc',
    'KY': '1f1f0-1f1fe',
    'KZ': '1f1f0-1f1ff',
    'LA': '1f1f1-1f1e6',
    'LB': '1f1f1-1f1e7',
    'LC': '1f1f1-1f1e8',
    'LI': '1f1f1-1f1ee',
    'LK': '1f1f1-1f1f0',
    'LR': '1f1f1-1f1f7',
    'LS': '1f1f1-1f1f8',
    'LT': '1f1f1-1f1f9',
    'LU': '1f1f1-1f1fa',
    'LV': '1f1f1-1f1fb',
    'LY': '1f1f1-1f1fe',
    'MA': '1f1f2-1f1e6',
    'MC': '1f1f2-1f1e8',
    'MD': '1f1f2-1f1e9',
    'ME': '1f1f2-1f1ea',
    'MF': '1f1f2-1f1eb',
    'MG': '1f1f2-1f1ec',
    'MH': '1f1f2-1f1ed',
    'MK': '1f1f2-1f1f0',
    'ML': '1f1f2-1f1f1',
    'MM': '1f1f2-1f1f2',
    'MN': '1f1f2-1f1f3',
    'MO': '1f1f2-1f1f4',
    'MP': '1f1f2-1f1f5',
    'MQ': '1f1f2-1f1f6',
    'MR': '1f1f2-1f1f7',
    'MS': '1f1f2-1f1f8',
    'MT': '1f1f2-1f1f9',
    'MU': '1f1f2-1f1fa',
    'MV': '1f1f2-1f1fb',
    'MW': '1f1f2-1f1fc',
    'MX': '1f1f2-1f1fd',
    'MY': '1f1f2-1f1fe',
    'MZ': '1f1f2-1f1ff',
    'NA': '1f1f3-1f1e6',
    'NC': '1f1f3-1f1e8',
    'NE': '1f1f3-1f1ea',
    'NF': '1f1f3-1f1eb',
    'NG': '1f1f3-1f1ec',
    'NI': '1f1f3-1f1ee',
    'NL': '1f1f3-1f1f1',
    'NO': '1f1f3-1f1f4',
    'NP': '1f1f3-1f1f5',
    'NR': '1f1f3-1f1f7',
    'NU': '1f1f3-1f1fa',
    'NZ': '1f1f3-1f1ff',
    'OM': '1f1f4-1f1f2',
    'PA': '1f1f5-1f1e6',
    'PE': '1f1f5-1f1ea',
    'PF': '1f1f5-1f1eb',
    'PG': '1f1f5-1f1ec',
    'PH': '1f1f5-1f1ed',
    'PK': '1f1f5-1f1f0',
    'PL': '1f1f5-1f1f1',
    'PM': '1f1f5-1f1f2',
    'PN': '1f1f5-1f1f3',
    'PR': '1f1f5-1f1f7',
    'PS': '1f1f5-1f1f8',
    'PT': '1f1f5-1f1f9',
    'PW': '1f1f5-1f1fc',
    'PY': '1f1f5-1f1fe',
    'QA': '1f1f6-1f1e6',
    'RE': '1f1f7-1f1ea',
    'RO': '1f1f7-1f1f4',
    'RS': '1f1f7-1f1f8',
    'RU': '1f1f7-1f1fa',
    'RW': '1f1f7-1f1fc',
    'SA': '1f1f8-1f1e6',
    'SB': '1f1f8-1f1e7',
    'SC': '1f1f8-1f1e8',
    'SD': '1f1f8-1f1e9',
    'SE': '1f1f8-1f1ea',
    'SG': '1f1f8-1f1ec',
    'SH': '1f1f8-1f1ed',
    'SI': '1f1f8-1f1ee',
    'SJ': '1f1f8-1f1ef',
    'SK': '1f1f8-1f1f0',
    'SL': '1f1f8-1f1f1',
    'SM': '1f1f8-1f1f2',
    'SN': '1f1f8-1f1f3',
    'SO': '1f1f8-1f1f4',
    'SR': '1f1f8-1f1f7',
    'SS': '1f1f8-1f1f8',
    'ST': '1f1f8-1f1f9',
    'SV': '1f1f8-1f1fb',
    'SX': '1f1f8-1f1fd',
    'SY': '1f1f8-1f1fe',
    'SZ': '1f1f8-1f1ff',
    'TA': '1f1f9-1f1e6',
    'TC': '1f1f9-1f1e8',
    'TD': '1f1f9-1f1e9',
    'TF': '1f1f9-1f1eb',
    'TG': '1f1f9-1f1ec',
    'TH': '1f1f9-1f1ed',
    'TJ': '1f1f9-1f1ef',
    'TK': '1f1f9-1f1f0',
    'TL': '1f1f9-1f1f1',
    'TM': '1f1f9-1f1f2',
    'TN': '1f1f9-1f1f3',
    'TO': '1f1f9-1f1f4',
    'TR': '1f1f9-1f1f7',
    'TT': '1f1f9-1f1f9',
    'TV': '1f1f9-1f1fb',
    'TW': '1f1f9-1f1fc',
    'TZ': '1f1f9-1f1ff',
    'UA': '1f1fa-1f1e6',
    'UG': '1f1fa-1f1ec',
    'UM': '1f1fa-1f1f2',
    'UN': '1f1fa-1f1f3',
    'US': '1f1fa-1f1f8',
    'UY': '1f1fa-1f1fe',
    'UZ': '1f1fa-1f1ff',
    'VA': '1f1fb-1f1e6',
    'VC': '1f1fb-1f1e8',
    'VE': '1f1fb-1f1ea',
    'VG': '1f1fb-1f1ec',
    'VI': '1f1fb-1f1ee',
    'VN': '1f1fb-1f1f3',
    'VU': '1f1fb-1f1fa',
    'WF': '1f1fc-1f1eb',
    'WS': '1f1fc-1f1f8',
    'XK': '1f1fd-1f1f0',
    'YE': '1f1fe-1f1ea',
    'YT': '1f1fe-1f1f9',
    'ZA': '1f1ff-1f1e6',
    'ZM': '1f1ff-1f1f2',
    'ZW': '1f1ff-1f1fc'
  };

  // Normalize locale
  const split = locale.toUpperCase().split(/[-_]/);
  const lang = split.shift().toLowerCase();
  let code = split.pop();

  // Inline defaults: if no region specified, pick a default country we know exists in flagMap
  // Adjust these inline defaults as needed
  if (!/^[A-Z]{2}$/.test(code)) {
    try {
      const region = new Intl.Locale(locale).maximize().region;
      code = region ? region.toUpperCase() : '';
    } catch (e) {
      code = ''; // fallback if Intl.Locale fails
    }
  }

  // If we have a code, ensure it's valid in our flagMap
  if (!code || !flagMap[code]) return '';
  return `./flags/${flagMap[code]}.svg`;
}

// Expose the function
export default getFlagEmoji;
